{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/alvinneri/Desktop/Projects/PMS Mobile/property-management-mobile/employee-app/screens/propertymanager/reports/index.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { FC, useEffect, useState } from \"react\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from \"react-native-responsive-screen\";\nimport Toast from \"react-native-toast-message\";\nimport { setLoading, setUser } from \"../../../redux/public/actions\";\nimport { db } from \"../../../firebase/config\";\nimport moment from \"moment\";\nimport { Button, useTheme } from \"react-native-paper\";\nimport { ImageComponent } from \"../../../components/image\";\nimport { CarouselComponent } from \"../../../components/carousel\";\nexport default function ReportsScreen() {\n  var _this = this;\n\n  var dispatch = useDispatch();\n  var navigation = useNavigation();\n\n  var _useSelector = useSelector(function (state) {\n    return state.public;\n  }),\n      user = _useSelector.user;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      tickets = _useState2[0],\n      setTickets = _useState2[1];\n\n  var _useTheme = useTheme(),\n      colors = _useTheme.colors;\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalVisible = _useState4[0],\n      setModalVisible = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      image = _useState6[0],\n      setImage = _useState6[1];\n\n  var reportsRef = db.collection(\"maintenance\");\n\n  var getTickets = function getTickets() {\n    var maintenanceRef, unsubscribed;\n    return _regeneratorRuntime.async(function getTickets$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(user, \"user\");\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(db.collection(\"maintenance\").where(\"condoId\", \"==\", user.invitedBy.trim()));\n\n          case 3:\n            maintenanceRef = _context.sent;\n            unsubscribed = maintenanceRef.onSnapshot(function (querySnapshot) {\n              var _tickets = [];\n              querySnapshot.forEach(function (doc) {\n                var _ticket = _objectSpread(_objectSpread({}, doc.data()), {}, {\n                  id: doc.id\n                });\n\n                _tickets.push(_ticket);\n              });\n              setTickets(_tickets);\n            });\n            return _context.abrupt(\"return\", unsubscribed);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var changeStatusApprove = function changeStatusApprove(id) {\n    reportsRef.doc(id).update({\n      status: \"APPROVED\"\n    });\n  };\n\n  var changeStatusReject = function changeStatusReject(id) {\n    reportsRef.doc(id).update({\n      status: \"REJECT\"\n    });\n  };\n\n  useEffect(function () {\n    getTickets();\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, \"All Tickets\"), React.createElement(ScrollView, {\n    contentContainerStyle: styles.scrollContainer,\n    showsHorizontalScrollIndicator: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, tickets.map(function (item, index) {\n    return React.createElement(View, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: styles.card,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }\n    }, \"Subject: \", item == null ? void 0 : item.subject), React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }, \"Description: \", item == null ? void 0 : item.description), React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 19\n      }\n    }, \"Date:\", \" \", moment(item == null ? void 0 : item.date.toDate()).format(\"MMM DD YYYY h:mm A\")), React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 19\n      }\n    }, \"Status: \", item == null ? void 0 : item.status)), item.status === \"OPEN\" ? React.createElement(View, {\n      style: styles.options,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 19\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: [styles.btnOptions, {\n        backgroundColor: \"green\"\n      }],\n      onPress: function onPress() {\n        changeStatusApprove(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#ffffff\",\n        fontSize: wp(\"4%\")\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 23\n      }\n    }, \"APPROVE\")), React.createElement(TouchableOpacity, {\n      style: [styles.btnOptions, {\n        backgroundColor: \"red\"\n      }],\n      onPress: function onPress() {\n        changeStatusReject(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#ffffff\",\n        fontSize: wp(\"4%\")\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 23\n      }\n    }, \"REJECT\"))) : null, React.createElement(TouchableOpacity, {\n      style: [styles.btn, {\n        backgroundColor: colors.primary\n      }],\n      onPress: function onPress() {\n        setImage(item == null ? void 0 : item.image);\n        setModalVisible(true);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#ffffff\",\n        fontSize: wp(\"4%\")\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 19\n      }\n    }, \"View Image\")));\n  }))), React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisible,\n    onRequestClose: function onRequestClose() {\n      setModalVisible(!modalVisible);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }, React.createElement(CarouselComponent, {\n    photos: image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }), React.createElement(Pressable, {\n    style: [styles.btn, styles.buttonClose],\n    onPress: function onPress() {\n      return setModalVisible(!modalVisible);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.textStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }, \"Close\"))))));\n}\nvar width = Dimensions.get(\"window\").width;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: width\n  },\n  name: {\n    fontSize: 20,\n    padding: 20\n  },\n  scrollContainer: {\n    width: width,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    alignSelf: \"center\"\n  },\n  card: {\n    width: wp(\"90%\"),\n    alignSelf: \"stretch\",\n    textAlign: \"center\",\n    padding: 20,\n    backgroundColor: \"#ebebeb\",\n    marginTop: 10,\n    justifyContent: \"center\"\n  },\n  btnOptions: {\n    marginBottom: 5,\n    padding: 10,\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: wp(\"30%\")\n  },\n  options: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  btn: {\n    marginBottom: 10,\n    padding: 15,\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: wp(\"90%\")\n  },\n  text: {\n    fontSize: wp(\"4%\"),\n    marginVertical: 5\n  },\n  image: {\n    width: wp(\"90%\"),\n    height: hp(\"50%\")\n  },\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 25\n  },\n  modalView: {\n    height: 500,\n    margin: 20,\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5\n  },\n  button: {\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2\n  },\n  buttonOpen: {\n    backgroundColor: \"#F194FF\"\n  },\n  buttonClose: {\n    backgroundColor: \"#2196F3\"\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\"\n  }\n});","map":{"version":3,"sources":["/Users/alvinneri/Desktop/Projects/PMS Mobile/property-management-mobile/employee-app/screens/propertymanager/reports/index.js"],"names":["React","FC","useEffect","useState","useNavigation","useSelector","useDispatch","widthPercentageToDP","wp","heightPercentageToDP","hp","Toast","setLoading","setUser","db","moment","Button","useTheme","ImageComponent","CarouselComponent","ReportsScreen","dispatch","navigation","state","public","user","tickets","setTickets","colors","modalVisible","setModalVisible","image","setImage","reportsRef","collection","getTickets","console","log","where","invitedBy","trim","maintenanceRef","unsubscribed","onSnapshot","querySnapshot","_tickets","forEach","doc","_ticket","data","id","push","changeStatusApprove","update","status","changeStatusReject","styles","container","name","scrollContainer","map","item","index","card","text","subject","description","date","toDate","format","options","btnOptions","backgroundColor","color","fontSize","btn","primary","centeredView","modalView","buttonClose","textStyle","width","Dimensions","get","StyleSheet","create","flex","padding","alignItems","justifyContent","alignSelf","textAlign","marginTop","marginBottom","flexDirection","marginVertical","height","margin","borderRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","button","buttonOpen","fontWeight","modalText"],"mappings":"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","sourcesContent":["import React, { FC, useEffect, useState } from \"react\";\nimport {\n  Platform,\n  StyleSheet,\n  Text,\n  View,\n  ScrollView,\n  Dimensions,\n  Modal,\n  Pressable,\n  TouchableOpacity,\n  Image,\n} from \"react-native\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  widthPercentageToDP as wp,\n  heightPercentageToDP as hp,\n} from \"react-native-responsive-screen\";\nimport Toast from \"react-native-toast-message\";\nimport { setLoading, setUser } from \"../../../redux/public/actions\";\nimport { db } from \"../../../firebase/config\";\nimport moment from \"moment\";\nimport { Button, useTheme } from \"react-native-paper\";\nimport { ImageComponent } from \"../../../components/image\";\nimport { CarouselComponent } from \"../../../components/carousel\";\n\nexport default function ReportsScreen() {\n  const dispatch = useDispatch();\n  const navigation = useNavigation();\n  const { user } = useSelector((state) => state.public);\n  const [tickets, setTickets] = useState([]);\n  const { colors } = useTheme();\n  const [modalVisible, setModalVisible] = useState(false);\n  const [image, setImage] = useState(\"\");\n  const reportsRef = db.collection(\"maintenance\");\n\n  const getTickets = async () => {\n    console.log(user, \"user\");\n    const maintenanceRef = await db\n      .collection(\"maintenance\")\n      .where(\"condoId\", \"==\", user.invitedBy.trim());\n\n    const unsubscribed = maintenanceRef.onSnapshot((querySnapshot) => {\n      let _tickets = [];\n      querySnapshot.forEach((doc) => {\n        let _ticket = {\n          ...doc.data(),\n          id: doc.id,\n        };\n        _tickets.push(_ticket);\n      });\n      setTickets(_tickets);\n    });\n    return unsubscribed;\n  };\n\n  const changeStatusApprove = (id) => {\n    reportsRef.doc(id).update({\n      status: `APPROVED`,\n    });\n  };\n\n  const changeStatusReject = (id) => {\n    reportsRef.doc(id).update({\n      status: `REJECT`,\n    });\n  };\n\n  useEffect(() => {\n    getTickets();\n  }, []);\n\n  return (\n    <>\n      <View style={styles.container}>\n        <Text style={styles.name}>All Tickets</Text>\n        <ScrollView\n          contentContainerStyle={styles.scrollContainer}\n          showsHorizontalScrollIndicator={false}\n        >\n          {tickets.map((item, index) => {\n            return (\n              <View key={index}>\n                <View style={styles.card}>\n                  <Text style={styles.text}>Subject: {item?.subject}</Text>\n                  <Text style={styles.text}>\n                    Description: {item?.description}\n                  </Text>\n                  <Text style={styles.text}>\n                    Date:{\" \"}\n                    {moment(item?.date.toDate()).format(\"MMM DD YYYY h:mm A\")}\n                  </Text>\n                  <Text style={styles.text}>Status: {item?.status}</Text>\n                </View>\n                {item.status === \"OPEN\" ? (\n                  <View style={styles.options}>\n                    <TouchableOpacity\n                      style={[styles.btnOptions, { backgroundColor: \"green\" }]}\n                      onPress={() => {\n                        changeStatusApprove(item.id);\n                      }}\n                    >\n                      <Text style={{ color: \"#ffffff\", fontSize: wp(\"4%\") }}>\n                        APPROVE\n                      </Text>\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                      style={[styles.btnOptions, { backgroundColor: \"red\" }]}\n                      onPress={() => {\n                        changeStatusReject(item.id);\n                      }}\n                    >\n                      <Text style={{ color: \"#ffffff\", fontSize: wp(\"4%\") }}>\n                        REJECT\n                      </Text>\n                    </TouchableOpacity>\n                  </View>\n                ) : null}\n\n                <TouchableOpacity\n                  style={[styles.btn, { backgroundColor: colors.primary }]}\n                  onPress={() => {\n                    setImage(item?.image);\n                    setModalVisible(true);\n                  }}\n                >\n                  <Text style={{ color: \"#ffffff\", fontSize: wp(\"4%\") }}>\n                    View Image\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            );\n          })}\n        </ScrollView>\n      </View>\n      <Modal\n        animationType=\"slide\"\n        transparent={true}\n        visible={modalVisible}\n        onRequestClose={() => {\n          setModalVisible(!modalVisible);\n        }}\n      >\n        <View style={styles.centeredView}>\n          <View style={styles.modalView}>\n            <CarouselComponent photos={image} />\n            <Pressable\n              style={[styles.btn, styles.buttonClose]}\n              onPress={() => setModalVisible(!modalVisible)}\n            >\n              <Text style={styles.textStyle}>Close</Text>\n            </Pressable>\n          </View>\n        </View>\n      </Modal>\n    </>\n  );\n}\n\nconst width = Dimensions.get(\"window\").width;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: width,\n  },\n  name: {\n    fontSize: 20,\n    padding: 20,\n  },\n  scrollContainer: {\n    width: width,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    alignSelf: \"center\",\n  },\n  card: {\n    width: wp(\"90%\"),\n    alignSelf: \"stretch\",\n    textAlign: \"center\",\n    padding: 20,\n    backgroundColor: \"#ebebeb\",\n    marginTop: 10,\n    justifyContent: \"center\",\n  },\n  btnOptions: {\n    marginBottom: 5,\n    padding: 10,\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: wp(\"30%\"),\n  },\n  options: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n  btn: {\n    marginBottom: 10,\n    padding: 15,\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: wp(\"90%\"),\n  },\n  text: {\n    fontSize: wp(\"4%\"),\n    marginVertical: 5,\n  },\n  image: {\n    width: wp(\"90%\"),\n    height: hp(\"50%\"),\n  },\n\n  // Modal\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 25,\n  },\n  modalView: {\n    height: 500,\n    margin: 20,\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  button: {\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2,\n  },\n  buttonOpen: {\n    backgroundColor: \"#F194FF\",\n  },\n  buttonClose: {\n    backgroundColor: \"#2196F3\",\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}