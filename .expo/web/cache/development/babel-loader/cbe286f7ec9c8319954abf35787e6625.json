{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/alvinneri/Desktop/Projects/PMS Mobile/property-management-mobile/employee-app/screens/maintenance/maintenance.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { FC, useEffect, useState } from \"react\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from \"react-native-responsive-screen\";\nimport Toast from \"react-native-toast-message\";\nimport { setLoading, setUser } from \"../../redux/public/actions\";\nimport { db } from \"../../firebase/config\";\nimport moment from \"moment\";\nimport { Button, useTheme } from \"react-native-paper\";\nimport { ImageComponent } from \"../../components/image\";\nimport { CarouselComponent } from \"../../components/carousel\";\nexport default function MaintenanceScreen() {\n  var _this = this;\n\n  var dispatch = useDispatch();\n  var navigation = useNavigation();\n\n  var _useSelector = useSelector(function (state) {\n    return state.public;\n  }),\n      user = _useSelector.user;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      tickets = _useState2[0],\n      setTickets = _useState2[1];\n\n  var _useTheme = useTheme(),\n      colors = _useTheme.colors;\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalVisible = _useState4[0],\n      setModalVisible = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      image = _useState6[0],\n      setImage = _useState6[1];\n\n  var getTickets = function getTickets() {\n    var maintenanceRef, unsubscribed;\n    return _regeneratorRuntime.async(function getTickets$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(user, \"user\");\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(db.collection(\"maintenance\").where(\"condoId\", \"==\", user.invitedBy.trim()).where(\"reporterUid\", \"==\", user.uid));\n\n          case 3:\n            maintenanceRef = _context.sent;\n            unsubscribed = maintenanceRef.onSnapshot(function (querySnapshot) {\n              var _tickets = [];\n              querySnapshot.forEach(function (doc) {\n                console.log(doc.data());\n\n                _tickets.push(doc.data());\n              });\n              setTickets(_tickets);\n            });\n            return _context.abrupt(\"return\", unsubscribed);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getTickets();\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"Your tickets\"), React.createElement(ScrollView, {\n    contentContainerStyle: styles.scrollContainer,\n    showsHorizontalScrollIndicator: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, tickets.map(function (item, index) {\n    return React.createElement(View, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 15\n      }\n    }, React.createElement(View, {\n      style: styles.card,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 19\n      }\n    }, \"Subject: \", item == null ? void 0 : item.subject), React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 19\n      }\n    }, \"Description: \", item == null ? void 0 : item.description), React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 19\n      }\n    }, \"Date:\", \" \", moment(item == null ? void 0 : item.date.toDate()).format(\"MMM DD YYYY h:mm A\")), React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 19\n      }\n    }, \"Status: \", item == null ? void 0 : item.status)), React.createElement(TouchableOpacity, {\n      style: [styles.btn, {\n        backgroundColor: colors.primary\n      }],\n      onPress: function onPress() {\n        setImage(item == null ? void 0 : item.image);\n        setModalVisible(true);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#ffffff\",\n        fontSize: wp(\"4%\")\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 19\n      }\n    }, \"View Image\")));\n  }))), React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisible,\n    onRequestClose: function onRequestClose() {\n      setModalVisible(!modalVisible);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, React.createElement(CarouselComponent, {\n    photos: image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), React.createElement(Pressable, {\n    style: [styles.btn, styles.buttonClose],\n    onPress: function onPress() {\n      return setModalVisible(!modalVisible);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.textStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, \"Close\"))))));\n}\nvar width = Dimensions.get(\"window\").width;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: width\n  },\n  name: {\n    fontSize: 20,\n    padding: 20\n  },\n  scrollContainer: {\n    width: width,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    alignSelf: \"center\"\n  },\n  card: {\n    width: wp(\"90%\"),\n    alignSelf: \"stretch\",\n    textAlign: \"center\",\n    padding: 20,\n    backgroundColor: \"#ebebeb\",\n    marginTop: 10,\n    justifyContent: \"center\"\n  },\n  btn: {\n    marginBottom: 10,\n    padding: 15,\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: wp(\"90%\")\n  },\n  text: {\n    fontSize: wp(\"4%\"),\n    marginVertical: 5\n  },\n  image: {\n    width: wp(\"90%\"),\n    height: hp(\"50%\")\n  },\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 25\n  },\n  modalView: {\n    height: 500,\n    margin: 20,\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5\n  },\n  button: {\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2\n  },\n  buttonOpen: {\n    backgroundColor: \"#F194FF\"\n  },\n  buttonClose: {\n    backgroundColor: \"#2196F3\"\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\"\n  }\n});","map":{"version":3,"sources":["/Users/alvinneri/Desktop/Projects/PMS Mobile/property-management-mobile/employee-app/screens/maintenance/maintenance.js"],"names":["React","FC","useEffect","useState","useNavigation","useSelector","useDispatch","widthPercentageToDP","wp","heightPercentageToDP","hp","Toast","setLoading","setUser","db","moment","Button","useTheme","ImageComponent","CarouselComponent","MaintenanceScreen","dispatch","navigation","state","public","user","tickets","setTickets","colors","modalVisible","setModalVisible","image","setImage","getTickets","console","log","collection","where","invitedBy","trim","uid","maintenanceRef","unsubscribed","onSnapshot","querySnapshot","_tickets","forEach","doc","data","push","styles","container","name","scrollContainer","map","item","index","card","text","subject","description","date","toDate","format","status","btn","backgroundColor","primary","color","fontSize","centeredView","modalView","buttonClose","textStyle","width","Dimensions","get","StyleSheet","create","flex","padding","alignItems","justifyContent","alignSelf","textAlign","marginTop","marginBottom","marginVertical","height","margin","borderRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","button","buttonOpen","fontWeight","modalText"],"mappings":"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","sourcesContent":["import React, { FC, useEffect, useState } from \"react\";\nimport {\n  Platform,\n  StyleSheet,\n  Text,\n  View,\n  ScrollView,\n  Dimensions,\n  Modal,\n  Pressable,\n  TouchableOpacity,\n  Image,\n} from \"react-native\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  widthPercentageToDP as wp,\n  heightPercentageToDP as hp,\n} from \"react-native-responsive-screen\";\nimport Toast from \"react-native-toast-message\";\nimport { setLoading, setUser } from \"../../redux/public/actions\";\nimport { db } from \"../../firebase/config\";\nimport moment from \"moment\";\nimport { Button, useTheme } from \"react-native-paper\";\nimport { ImageComponent } from \"../../components/image\";\nimport { CarouselComponent } from \"../../components/carousel\";\n\nexport default function MaintenanceScreen() {\n  const dispatch = useDispatch();\n  const navigation = useNavigation();\n  const { user } = useSelector((state) => state.public);\n  const [tickets, setTickets] = useState([]);\n  const { colors } = useTheme();\n  const [modalVisible, setModalVisible] = useState(false);\n  const [image, setImage] = useState(\"\");\n\n  const getTickets = async () => {\n    console.log(user, \"user\");\n    const maintenanceRef = await db\n      .collection(\"maintenance\")\n      .where(\"condoId\", \"==\", user.invitedBy.trim())\n      .where(\"reporterUid\", \"==\", user.uid);\n\n    const unsubscribed = maintenanceRef.onSnapshot((querySnapshot) => {\n      let _tickets = [];\n      querySnapshot.forEach((doc) => {\n        console.log(doc.data());\n        _tickets.push(doc.data());\n      });\n      setTickets(_tickets);\n    });\n    return unsubscribed;\n  };\n\n  useEffect(() => {\n    getTickets();\n  }, []);\n\n  return (\n    <>\n      <View style={styles.container}>\n        <Text style={styles.name}>Your tickets</Text>\n        <ScrollView\n          contentContainerStyle={styles.scrollContainer}\n          showsHorizontalScrollIndicator={false}\n        >\n          {tickets.map((item, index) => {\n            return (\n              <View key={index}>\n                <View style={styles.card}>\n                  <Text style={styles.text}>Subject: {item?.subject}</Text>\n                  <Text style={styles.text}>\n                    Description: {item?.description}\n                  </Text>\n                  <Text style={styles.text}>\n                    Date:{\" \"}\n                    {moment(item?.date.toDate()).format(\"MMM DD YYYY h:mm A\")}\n                  </Text>\n                  <Text style={styles.text}>Status: {item?.status}</Text>\n                </View>\n                <TouchableOpacity\n                  style={[styles.btn, { backgroundColor: colors.primary }]}\n                  onPress={() => {\n                    setImage(item?.image);\n                    setModalVisible(true);\n                  }}\n                >\n                  <Text style={{ color: \"#ffffff\", fontSize: wp(\"4%\") }}>\n                    View Image\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            );\n          })}\n        </ScrollView>\n      </View>\n      <Modal\n        animationType=\"slide\"\n        transparent={true}\n        visible={modalVisible}\n        onRequestClose={() => {\n          setModalVisible(!modalVisible);\n        }}\n      >\n        <View style={styles.centeredView}>\n          <View style={styles.modalView}>\n            <CarouselComponent photos={image} />\n            <Pressable\n              style={[styles.btn, styles.buttonClose]}\n              onPress={() => setModalVisible(!modalVisible)}\n            >\n              <Text style={styles.textStyle}>Close</Text>\n            </Pressable>\n          </View>\n        </View>\n      </Modal>\n    </>\n  );\n}\n\nconst width = Dimensions.get(\"window\").width;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: width,\n  },\n  name: {\n    fontSize: 20,\n    padding: 20,\n  },\n  scrollContainer: {\n    width: width,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    alignSelf: \"center\",\n  },\n  card: {\n    width: wp(\"90%\"),\n    alignSelf: \"stretch\",\n    textAlign: \"center\",\n    padding: 20,\n    backgroundColor: \"#ebebeb\",\n    marginTop: 10,\n    justifyContent: \"center\",\n  },\n  btn: {\n    marginBottom: 10,\n    padding: 15,\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: wp(\"90%\"),\n  },\n  text: {\n    fontSize: wp(\"4%\"),\n    marginVertical: 5,\n  },\n  image: {\n    width: wp(\"90%\"),\n    height: hp(\"50%\"),\n  },\n\n  // Modal\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 25,\n  },\n  modalView: {\n    height: 500,\n    margin: 20,\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  button: {\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2,\n  },\n  buttonOpen: {\n    backgroundColor: \"#F194FF\",\n  },\n  buttonClose: {\n    backgroundColor: \"#2196F3\",\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}