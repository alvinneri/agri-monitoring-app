{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/alvinneri/Desktop/Projects/PMS Mobile/property-management-mobile/employee-app/screens/maintenance/maintenance.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { FC, useEffect, useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from \"react-native-responsive-screen\";\nimport { db } from \"../../firebase/config\";\nimport moment from \"moment\";\nimport { Button, useTheme } from \"react-native-paper\";\nimport { CarouselComponent } from \"../../components/carousel\";\nimport { theme } from \"../../theme\";\nexport default function MaintenanceScreen() {\n  var _this = this;\n\n  var navigation = useNavigation();\n\n  var _useSelector = useSelector(function (state) {\n    return state.public;\n  }),\n      user = _useSelector.user;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      tickets = _useState2[0],\n      setTickets = _useState2[1];\n\n  var _useTheme = useTheme(),\n      colors = _useTheme.colors;\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalVisible = _useState4[0],\n      setModalVisible = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      image = _useState6[0],\n      setImage = _useState6[1];\n\n  var getTickets = function getTickets() {\n    var maintenanceRef, unsubscribed;\n    return _regeneratorRuntime.async(function getTickets$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(user, \"user\");\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(db.collection(\"maintenance\").where(\"condoId\", \"==\", user.invitedBy.trim()).where(\"reporterUid\", \"==\", user.uid));\n\n          case 3:\n            maintenanceRef = _context.sent;\n            unsubscribed = maintenanceRef.onSnapshot(function (querySnapshot) {\n              var _tickets = [];\n              querySnapshot.forEach(function (doc) {\n                console.log(doc.data());\n\n                _tickets.push(doc.data());\n              });\n              setTickets(_tickets);\n            });\n            return _context.abrupt(\"return\", unsubscribed);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getTickets();\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"Your tickets\"), React.createElement(ScrollView, {\n    contentContainerStyle: styles.scrollContainer,\n    showsHorizontalScrollIndicator: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, tickets.length ? tickets.map(function (item, index) {\n    var _item$asset, _item$asset2;\n\n    return React.createElement(View, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, React.createElement(View, {\n      style: styles.card,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 19\n      }\n    }, React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    }, \"Asset Code:\", \" \", item != null && (_item$asset = item.asset) != null && _item$asset.assetCode ? item == null ? void 0 : (_item$asset2 = item.asset) == null ? void 0 : _item$asset2.assetCode : \"N/A\"), React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, \"Description: \", item == null ? void 0 : item.description), React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, \"Date:\", \" \", moment(item == null ? void 0 : item.date.toDate()).format(\"MMM DD YYYY h:mm A\")), React.createElement(Text, {\n      style: styles.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }\n    }, \"Status: \", item == null ? void 0 : item.status)), React.createElement(TouchableOpacity, {\n      style: [{\n        backgroundColor: colors.primary,\n        position: \"absolute\",\n        top: 15,\n        right: 20,\n        padding: 7,\n        borderRadius: 3\n      }],\n      onPress: function onPress() {\n        setImage(item == null ? void 0 : item.image);\n        setModalVisible(true);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: \"#ffffff\",\n        fontSize: wp(\"3%\")\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, \"View Image\")));\n  }) : React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20,\n      color: theme.colors.lighta\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, \"No Tickets Found.\")))), React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisible,\n    onRequestClose: function onRequestClose() {\n      setModalVisible(!modalVisible);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.centeredView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, React.createElement(CarouselComponent, {\n    photos: image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }), React.createElement(Pressable, {\n    style: [styles.btn, styles.buttonClose],\n    onPress: function onPress() {\n      return setModalVisible(!modalVisible);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.textStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, \"Close\"))))));\n}\nvar width = Dimensions.get(\"window\").width;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: width\n  },\n  name: {\n    fontSize: 20,\n    padding: 20,\n    color: theme.colors.primary\n  },\n  scrollContainer: {\n    width: width,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    alignSelf: \"center\"\n  },\n  card: {\n    width: wp(\"90%\"),\n    alignSelf: \"stretch\",\n    textAlign: \"center\",\n    padding: 20,\n    backgroundColor: theme.colors.primary,\n    marginTop: 10,\n    justifyContent: \"center\",\n    borderRadius: 20\n  },\n  btn: {\n    marginBottom: 10,\n    padding: 15,\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: wp(\"90%\")\n  },\n  text: {\n    fontSize: wp(\"4%\"),\n    marginVertical: 5,\n    color: theme.colors.light\n  },\n  image: {\n    width: wp(\"90%\"),\n    height: hp(\"50%\")\n  },\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 25\n  },\n  modalView: {\n    height: 500,\n    margin: 20,\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5\n  },\n  button: {\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2\n  },\n  buttonOpen: {\n    backgroundColor: \"#F194FF\"\n  },\n  buttonClose: {\n    backgroundColor: theme.colors.light\n  },\n  textStyle: {\n    color: theme.colors.primary,\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\"\n  }\n});","map":{"version":3,"sources":["/Users/alvinneri/Desktop/Projects/PMS Mobile/property-management-mobile/employee-app/screens/maintenance/maintenance.js"],"names":["React","FC","useEffect","useState","useNavigation","useSelector","useDispatch","widthPercentageToDP","wp","heightPercentageToDP","hp","db","moment","Button","useTheme","CarouselComponent","theme","MaintenanceScreen","navigation","state","public","user","tickets","setTickets","colors","modalVisible","setModalVisible","image","setImage","getTickets","console","log","collection","where","invitedBy","trim","uid","maintenanceRef","unsubscribed","onSnapshot","querySnapshot","_tickets","forEach","doc","data","push","styles","container","name","scrollContainer","length","map","item","index","card","text","asset","assetCode","description","date","toDate","format","status","backgroundColor","primary","position","top","right","padding","borderRadius","color","fontSize","lighta","centeredView","modalView","btn","buttonClose","textStyle","width","Dimensions","get","StyleSheet","create","flex","alignItems","justifyContent","alignSelf","textAlign","marginTop","marginBottom","marginVertical","light","height","margin","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","button","buttonOpen","fontWeight","modalText"],"mappings":"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","sourcesContent":["import React, { FC, useEffect, useState } from \"react\";\nimport {\n  StyleSheet,\n  Text,\n  View,\n  ScrollView,\n  Dimensions,\n  Modal,\n  Pressable,\n  TouchableOpacity,\n} from \"react-native\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  widthPercentageToDP as wp,\n  heightPercentageToDP as hp,\n} from \"react-native-responsive-screen\";\n\nimport { db } from \"../../firebase/config\";\nimport moment from \"moment\";\nimport { Button, useTheme } from \"react-native-paper\";\nimport { CarouselComponent } from \"../../components/carousel\";\nimport { theme } from \"../../theme\";\n\nexport default function MaintenanceScreen() {\n  const navigation = useNavigation();\n  const { user } = useSelector((state) => state.public);\n  const [tickets, setTickets] = useState([]);\n  const { colors } = useTheme();\n  const [modalVisible, setModalVisible] = useState(false);\n  const [image, setImage] = useState(\"\");\n\n  const getTickets = async () => {\n    console.log(user, \"user\");\n    const maintenanceRef = await db\n      .collection(\"maintenance\")\n      .where(\"condoId\", \"==\", user.invitedBy.trim())\n      .where(\"reporterUid\", \"==\", user.uid);\n\n    const unsubscribed = maintenanceRef.onSnapshot((querySnapshot) => {\n      let _tickets = [];\n      querySnapshot.forEach((doc) => {\n        console.log(doc.data());\n        _tickets.push(doc.data());\n      });\n      setTickets(_tickets);\n    });\n    return unsubscribed;\n  };\n\n  useEffect(() => {\n    getTickets();\n  }, []);\n\n  return (\n    <>\n      <View style={styles.container}>\n        <Text style={styles.name}>Your tickets</Text>\n        <ScrollView\n          contentContainerStyle={styles.scrollContainer}\n          showsHorizontalScrollIndicator={false}\n        >\n          {tickets.length ? (\n            tickets.map((item, index) => {\n              return (\n                <View key={index}>\n                  <View style={styles.card}>\n                    <Text style={styles.text}>\n                      Asset Code:{\" \"}\n                      {item?.asset?.assetCode ? item?.asset?.assetCode : \"N/A\"}\n                    </Text>\n                    <Text style={styles.text}>\n                      Description: {item?.description}\n                    </Text>\n                    <Text style={styles.text}>\n                      Date:{\" \"}\n                      {moment(item?.date.toDate()).format(\"MMM DD YYYY h:mm A\")}\n                    </Text>\n                    <Text style={styles.text}>Status: {item?.status}</Text>\n                  </View>\n                  <TouchableOpacity\n                    style={[\n                      {\n                        backgroundColor: colors.primary,\n                        position: \"absolute\",\n                        top: 15,\n                        right: 20,\n                        padding: 7,\n                        borderRadius: 3,\n                      },\n                    ]}\n                    onPress={() => {\n                      setImage(item?.image);\n                      setModalVisible(true);\n                    }}\n                  >\n                    <Text style={{ color: \"#ffffff\", fontSize: wp(\"3%\") }}>\n                      View Image\n                    </Text>\n                  </TouchableOpacity>\n                </View>\n              );\n            })\n          ) : (\n            <View>\n              <Text style={{ fontSize: 20, color: theme.colors.lighta }}>\n                No Tickets Found.\n              </Text>\n            </View>\n          )}\n        </ScrollView>\n      </View>\n      <Modal\n        animationType=\"slide\"\n        transparent={true}\n        visible={modalVisible}\n        onRequestClose={() => {\n          setModalVisible(!modalVisible);\n        }}\n      >\n        <View style={styles.centeredView}>\n          <View style={styles.modalView}>\n            <CarouselComponent photos={image} />\n            <Pressable\n              style={[styles.btn, styles.buttonClose]}\n              onPress={() => setModalVisible(!modalVisible)}\n            >\n              <Text style={styles.textStyle}>Close</Text>\n            </Pressable>\n          </View>\n        </View>\n      </Modal>\n    </>\n  );\n}\n\nconst width = Dimensions.get(\"window\").width;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: width,\n  },\n  name: {\n    fontSize: 20,\n    padding: 20,\n    color: theme.colors.primary,\n  },\n  scrollContainer: {\n    width: width,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    alignSelf: \"center\",\n  },\n  card: {\n    width: wp(\"90%\"),\n    alignSelf: \"stretch\",\n    textAlign: \"center\",\n    padding: 20,\n    backgroundColor: theme.colors.primary,\n    marginTop: 10,\n    justifyContent: \"center\",\n    borderRadius: 20,\n  },\n  btn: {\n    marginBottom: 10,\n    padding: 15,\n    textAlign: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: wp(\"90%\"),\n  },\n  text: {\n    fontSize: wp(\"4%\"),\n    marginVertical: 5,\n    color: theme.colors.light,\n  },\n  image: {\n    width: wp(\"90%\"),\n    height: hp(\"50%\"),\n  },\n\n  // Modal\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 25,\n  },\n  modalView: {\n    height: 500,\n    margin: 20,\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  button: {\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2,\n  },\n  buttonOpen: {\n    backgroundColor: \"#F194FF\",\n  },\n  buttonClose: {\n    backgroundColor: theme.colors.light,\n  },\n  textStyle: {\n    color: theme.colors.primary,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}